<!doctype html>
<html lang="en" dir="ltr" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>SaversBasket | User Settings</title>
<meta name="description" content="">
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
<!-- Favicon -->
<link rel="shortcut icon" href="images/favicon.ico" />
<!-- Library / Plugin Css Build -->
<link rel="stylesheet" href="css/libs.min.css">
<!-- fontawsome Css Build -->
<link rel="stylesheet"
	href="vendor/@fortawesome/fontawesome-free/css/all.min.css">
<link rel="stylesheet" type="text/css"
	href="//cdn.jsdelivr.net/npm/anypicker@latest/dist/anypicker-all.min.css" />
<!-- Custom Css -->
<link rel="stylesheet" href="css/foodsto.css">
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link
	href="https://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.min.css"
	rel="stylesheet">
<script src="https://code.jquery.com/ui/1.10.2/jquery-ui.min.js"></script>
<!-- autocomplete plugin -->
<script type="text/javascript"
	src="http://cdnjs.cloudflare.com/ajax/libs/jquery-autocomplete/1.0.7/jquery.auto-complete.min.js"></script>
<script type="text/javascript"
	src="//cdn.jsdelivr.net/npm/anypicker@latest/dist/anypicker.min.js"></script>
<script type="text/javascript"
	src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.27.0/moment.min.js"></script>
<script src="/js/jquery.formautofill.min.js"></script>

<script type="text/javascript">
	$(document)
			.ready(
					function() {						
						
						/** Price Format */
						$('#budgetAmount').priceFormat({
							prefix: 'MUR',
							centsSeparator: '.',
							thousandsSeparator: '',
						    clearPrefix: true,
						    clearSuffix: true
						});

						/*  Submit form using Ajax */
						$('#updateUserSettings')
								.click(
								function(e) {

									var formData = new FormData();
									//Prevent default submission of form
									e.preventDefault();
									//Remove all errors
									$('input').next().remove();

									var data = new FormData(
											$('#userSettingsForm')[0]);

									$
									.post({
										url : 'api/v1/basket/updateUserSettings',
										data : data,
										enctype : 'multipart/form-data',
										processData : false,
										contentType : false,
										cache : false,
										async : false,
										beforeSend : function() {
											//$("#loaderBusiness").show();		           
										},
										success : function(res) {

											//Prevent default submission of form
											e.preventDefault();

											//Remove all errors
											$('input').next()
													.remove();
											$('select').next()
													.remove();

											if (res.validated) {

												//Reset form							
												$('#userSettingsForm')
														.trigger("reset");
												Swal.fire('Settings updated successfully!');											

											} else {

												Swal
														.fire('Settings not updated successfully!');

												//Set error messages
												$.each(res.errorMessages,
																function(
																		key,
																		value) {
																	selectByName(
																			key,
																			value);
																});
											}

										},
										complete : function(
												data) {

										},
										error : function(e) {

										}
									});

								});

					});

	function selectByName(elementName, value) {
		element = $('[name="' + elementName + '"]');
		element.next().remove();
		//show error message
		element.after('<span class="error-text">' + value + '</span>');
	}
</script>
</head>

<body class="  ">
	<span class="screen-darken"></span>
	<!-- loader Start -->
	<div id="loading">
		<div class="loader simple-loader">
			<div class="loader-body"></div>
		</div>
	</div>
	<!-- loader END -->
	<main class="main-content">
		<!--header area start-->
		<div th:replace="page-template.html :: header"></div>
		<!--header area end-->
		<div class="iq-height" style="height: 89px;"></div>
		<!--Nav End-->
		<div class="text-left iq-breadcrumb-one iq-bg-over black"
			style="background: url(images/banner/pages-banner.png); background-size: contain;">
			<div class="container">
				<div class="row align-items-center">
					<div class="col-sm-12">
						<nav aria-label="breadcrumb" class="text-center iq-breadcrumb-two">
							<h2 class="title">User Settings</h2>
							<ol class="breadcrumb main-bg">
								<li class="breadcrumb-item"><a href="./index.html"><i
										class="fas fa-home me-2"></i>Home</a></li>
								<li class="breadcrumb-item active">User Settings</li>
							</ol>
						</nav>
					</div>
				</div>
			</div>
		</div>
		<div class="section-padding-120 position-relative">

			<div class="container">
				<div class="row">
					<img src="images/banner/shap-5.png"
						class="background-img background-img-16 img-fluid"
						data-iq-gsap="onStart" data-iq-position-x="150"
						data-iq-ease="power.inOut" alt="shap-5"> <img
						src="images/banner/banner-shap-5.png"
						class="background-img background-img-8 img-fluid"
						data-iq-gsap="onStart" data-iq-position-x="-150"
						data-iq-ease="power.inOut" alt="banner-shap-5"> <img
						src="images/banner/banner-shap-2.png"
						class="background-img background-img-17 img-fluid"
						data-iq-gsap="onStart" data-iq-position-x="-150"
						data-iq-ease="power.inOut" alt="banner-shap-2">
					<div class="contact-img col-lg-5" data-iq-gsap="onStart"
						data-iq-position-x="-150" data-iq-rotate="0"
						data-iq-trigger="scroll" data-iq-ease="power.inOut">
						<img src="images/contact-us/cart-settings.png" alt="01"
							class="img-fluid">
					</div>
					<div class="col-lg-7 mt-5">
						<div class="scrolling-text text-center pt-5 position-relative">
							<div data-iq-gsap="onStart" data-iq-opacity="1"
								data-iq-position-x="200" data-iq-trigger="scroll"
								data-iq-scroll-scrub="true" data-iq-ease="power.inOut">
								</div>

						</div>
						<div class="iq-title-box">
							<span class="iq-subtitle">User Settings</span>
							<h2 class="iq-title">Configure your settings</h2>
							<div class="iq-title-divider"></div>
						</div>
						<form action="/updateUserSettings" method="post"
							enctype="multipart/form-data" id="userSettingsForm"
							acceptcharset="UTF-8">
							<div class="row">
								<div class="col-md-6 mb-4">
									<div class="mb-3">
										<label> Targeted Budget </label> </br> <input
											name="budgetAmount" id="budgetAmount"
											placeholder="Budget Amount *" type="text" th:value="${account.budgetedAmount}">										
									</div>
								</div>
								
							</div>
					
							<div class="iq-btn-container">
								<a id="updateUserSettings" class="">
									<div class="btn btn-secondary animation-btn">
										Save Settings <i aria-hidden="true"
											class="fas fa-long-arrow-alt-right ms-2"></i>
									</div>
								</a>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>

		<div th:replace="page-template.html :: footer"></div>

		<div id="back-to-top" style="">
			<a class="top" id="top" href="#top"> <svg width="30"
					viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M5 15.5L12 8.5L19 15.5" stroke="currentColor"
						stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
				</svg>
			</a>
		</div>
	</main>
	<!-- Wrapper End-->
	<!-- Library Bundle Script -->
	<script src="js/libs.min.js"></script>

	<!-- GSAP Animation JS-->
	<script src="vendor/gsap/gsap.min.js"></script>
	<script src="vendor/gsap/ScrollTrigger.min.js"></script>

	<!-- App Script -->
	<script src="js/app.js"></script>

	<!-- Gsap Animation Init -->
	<script src="js/gsap.js"></script>

	<!-- Slider Script -->
	<script src="js/slider.js"></script>
	<!-- components -->
	
	<!-- Price Format JS -->
	<script src="js/jquery.priceformat.min.js"></script>
	
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-CC2N6KJL6K"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() {dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-CC2N6KJL6K');
	</script>

</body>

</html>